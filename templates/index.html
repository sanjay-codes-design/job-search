<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Hunter Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <style>
        /* Custom Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .job-card { animation: fadeIn 0.4s ease-out forwards; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #6366f1; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; display: none; margin: 20px auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* Site Badge Colors */
        .badge-linkedin { background-color: #0077b5; color: white; }
        .badge-indeed { background-color: #2164f3; color: white; }
        .badge-glassdoor { background-color: #0caa41; color: white; }
        .badge-default { background-color: #6b7280; color: white; }
    </style>
</head>
<body class="bg-slate-50 min-h-screen">

    <nav class="bg-indigo-600 text-white shadow-lg">
        <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold flex items-center gap-2">
                <i class="fa-solid fa-robot"></i> LeadScraper v1
            </h1>
            <span class="text-sm bg-indigo-500 px-3 py-1 rounded-full">Connected to: LinkedIn, Indeed, Glassdoor</span>
        </div>
    </nav>

    <div class="max-w-6xl mx-auto px-4 py-8">
        
        <div class="bg-white rounded-xl shadow-md p-6 mb-10 border border-slate-100">
            <form method="POST" onsubmit="document.getElementById('loading').style.display='block'">
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1 relative">
                        <i class="fa-solid fa-briefcase absolute left-3 top-3.5 text-gray-400"></i>
                        <input type="text" name="job_title" placeholder="Job Title (e.g. Flutter Developer)" 
                               class="w-full pl-10 p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none" 
                               value="{{ search_term }}" required>
                    </div>
                    
                    <div class="flex-1 relative">
                        <i class="fa-solid fa-location-dot absolute left-3 top-3.5 text-gray-400"></i>
                        <input type="text" name="location" placeholder="Location (e.g. Ernakulam)" 
                               class="w-full pl-10 p-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none" 
                               value="{{ location }}" required>
                    </div>
                    
                    <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-8 rounded-lg transition flex items-center gap-2 justify-center shadow-lg shadow-indigo-200">
                        <i class="fa-solid fa-search"></i> Hunt
                    </button>
                </div>
            </form>
            <div id="loading" class="loader"></div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% if jobs %}
                {% for job in jobs %}
                <div class="job-card bg-white rounded-xl shadow-sm border border-slate-100 hover:shadow-xl transition duration-300 flex flex-col relative overflow-hidden group">
                    
                    <span class="absolute top-0 right-0 px-3 py-1 text-xs font-bold rounded-bl-lg uppercase
                        {% if 'linkedin' in job.site %} badge-linkedin
                        {% elif 'indeed' in job.site %} badge-indeed
                        {% elif 'glassdoor' in job.site %} badge-glassdoor
                        {% else %} badge-default {% endif %}">
                        {{ job.site }}
                    </span>

                    <div class="p-6 flex-1">
                        <h2 class="text-lg font-bold text-gray-800 leading-tight mb-1 group-hover:text-indigo-600 transition">{{ job.title }}</h2>
                        <p class="text-gray-500 text-sm font-medium mb-4 flex items-center gap-1">
                            <i class="fa-regular fa-building"></i> {{ job.company }}
                        </p>
                        <p class="text-xs text-gray-400 mb-4 bg-slate-50 inline-block px-2 py-1 rounded">
                            <i class="fa-solid fa-map-pin"></i> {{ job.location }}
                        </p>

                        {% if job.has_contact %}
                            <div class="bg-green-50 border border-green-100 rounded-lg p-3 mb-2">
                                <p class="text-xs text-green-700 font-bold mb-2 flex items-center gap-1">
                                    <i class="fa-solid fa-check-circle"></i> Direct Contact Found!
                                </p>
                                {% if job.emails %}
                                    <div class="text-sm text-gray-800 break-all mb-1 select-all">
                                        <i class="fa-solid fa-envelope text-green-600 mr-1"></i> {{ job.emails | join(', ') }}
                                    </div>
                                {% endif %}
                                {% if job.phones %}
                                    <div class="text-sm text-gray-800 break-all select-all">
                                        <i class="fa-solid fa-phone text-green-600 mr-1"></i> {{ job.phones | join(', ') }}
                                    </div>
                                {% endif %}
                            </div>
                        {% else %}
                             <div class="bg-gray-50 rounded-lg p-3 mb-2 text-center">
                                <p class="text-xs text-gray-400 italic">No emails detected in description</p>
                             </div>
                        {% endif %}
                    </div>

                    <div class="p-4 border-t border-slate-100 bg-slate-50">
                        <a href="{{ job.url }}" target="_blank" class="block w-full text-center bg-white border border-gray-300 hover:bg-indigo-50 text-indigo-700 font-medium py-2 rounded-lg transition text-sm">
                            Apply on {{ job.site | title }} <i class="fa-solid fa-external-link-alt ml-1"></i>
                        </a>
                    </div>
                </div>
                {% endfor %}
            {% elif request.method == 'POST' %}
                <div class="col-span-full text-center py-20">
                    <div class="text-6xl mb-4">üå´Ô∏è</div>
                    <h3 class="text-xl font-bold text-gray-700">No jobs found</h3>
                    <p class="text-gray-500">Try a different location or check your internet connection.</p>
                </div>
            {% endif %}
        </div>
    </div>

</body>
</html>